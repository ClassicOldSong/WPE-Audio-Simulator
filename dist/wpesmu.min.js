!function(){"use strict";function t(t,n){return n={exports:{}},t(n,n.exports),n.exports}function n(t){return t<0||t===1/0?0:t}function e(t){var n=URL.createObjectURL(t.target.files[0]);oe.src&&URL.revokeObjectURL(oe.src),oe.src=n}function r(){fe||ve(),oe.play()}function o(){oe.pause()}function i(){oe.pause(),oe.currentTime=0,window.cancelAnimationFrame(fe),fe=0}var u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=Math.ceil,a=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?a:c)(t)},f=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},s=l,d=f,p=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),v=t(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),y=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},h=y,w=function(t,n,e){if(h(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=g,b=function(t){if(!m(t))throw TypeError(t+" is not an object!");return t},S=function(t){try{return!!t()}catch(t){return!0}},E=!S(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),O=g,A=p.document,_=O(A)&&O(A.createElement),L=function(t){return _?A.createElement(t):{}},j=!E&&!S(function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a}),x=g,M=function(t,n){if(!x(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!x(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!x(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!x(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},C=b,T=j,P=M,F=Object.defineProperty,R=E?Object.defineProperty:function(t,n,e){if(C(t),n=P(n,!0),C(e),T)try{return F(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t},I={f:R},U=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},k=I,N=U,W=E?function(t,n,e){return k.f(t,n,N(1,e))}:function(t,n,e){return t[n]=e,t},D=p,q=v,B=w,z=W,G=function(t,n,e){var r,o,i,u=t&G.F,c=t&G.G,a=t&G.S,l=t&G.P,f=t&G.B,s=t&G.W,d=c?q:q[n]||(q[n]={}),p=d.prototype,v=c?D:a?D[n]:(D[n]||{}).prototype;c&&(e=n);for(r in e)(o=!u&&v&&void 0!==v[r])&&r in d||(i=o?v[r]:e[r],d[r]=c&&"function"!=typeof v[r]?e[r]:f&&o?B(i,D):s&&v[r]==i?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(i):l&&"function"==typeof i?B(Function.call,i):i,l&&((d.virtual||(d.virtual={}))[r]=i,t&G.R&&p&&!p[r]&&z(p,r,i)))};G.F=1,G.G=2,G.S=4,G.P=8,G.B=16,G.W=32,G.U=64,G.R=128;var H=G,Y=W,J={}.hasOwnProperty,K=function(t,n){return J.call(t,n)},Q={},V={}.toString,X=function(t){return V.call(t).slice(8,-1)},Z=X,$=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Z(t)?t.split(""):Object(t)},tt=$,nt=f,et=function(t){return tt(nt(t))},rt=l,ot=Math.min,it=function(t){return t>0?ot(rt(t),9007199254740991):0},ut=l,ct=Math.max,at=Math.min,lt=function(t,n){return t=ut(t),t<0?ct(t+n,0):at(t,n)},ft=et,st=it,dt=lt,pt=p,vt=pt["__core-js_shared__"]||(pt["__core-js_shared__"]={}),yt=function(t){return vt[t]||(vt[t]={})},ht=0,wt=Math.random(),gt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ht+wt).toString(36))},mt=yt("keys"),bt=gt,St=function(t){return mt[t]||(mt[t]=bt(t))},Et=K,Ot=et,At=function(t){return function(n,e,r){var o,i=ft(n),u=st(i.length),c=dt(r,u);if(t&&e!=e){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===e)return t||c||0;return!t&&-1}}(!1),_t=St("IE_PROTO"),Lt=function(t,n){var e,r=Ot(t),o=0,i=[];for(e in r)e!=_t&&Et(r,e)&&i.push(e);for(;n.length>o;)Et(r,e=n[o++])&&(~At(i,e)||i.push(e));return i},jt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),xt=Lt,Mt=jt,Ct=Object.keys||function(t){return xt(t,Mt)},Tt=I,Pt=b,Ft=Ct,Rt=E?Object.defineProperties:function(t,n){Pt(t);for(var e,r=Ft(n),o=r.length,i=0;o>i;)Tt.f(t,e=r[i++],n[e]);return t},It=p.document&&document.documentElement,Ut=b,kt=Rt,Nt=jt,Wt=St("IE_PROTO"),Dt=function(){},qt=function(){var t,n=L("iframe"),e=Nt.length;for(n.style.display="none",It.appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),qt=t.F;e--;)delete qt.prototype[Nt[e]];return qt()},Bt=Object.create||function(t,n){var e;return null!==t?(Dt.prototype=Ut(t),e=new Dt,Dt.prototype=null,e[Wt]=t):e=qt(),void 0===n?e:kt(e,n)},zt=t(function(t){var n=yt("wks"),e=gt,r=p.Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:e)("Symbol."+t))}).store=n}),Gt=I.f,Ht=K,Yt=zt("toStringTag"),Jt=function(t,n,e){t&&!Ht(t=e?t:t.prototype,Yt)&&Gt(t,Yt,{configurable:!0,value:n})},Kt=Bt,Qt=U,Vt=Jt,Xt={};W(Xt,zt("iterator"),function(){return this});var Zt=function(t,n,e){t.prototype=Kt(Xt,{next:Qt(1,e)}),Vt(t,n+" Iterator")},$t=f,tn=function(t){return Object($t(t))},nn=K,en=tn,rn=St("IE_PROTO"),on=Object.prototype,un=Object.getPrototypeOf||function(t){return t=en(t),nn(t,rn)?t[rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?on:null},cn=H,an=Y,ln=W,fn=Q,sn=Zt,dn=Jt,pn=un,vn=zt("iterator"),yn=!([].keys&&"next"in[].keys()),hn=function(){return this},wn=function(t){return function(n,e){var r,o,i=String(d(n)),u=s(e),c=i.length;return u<0||u>=c?t?"":void 0:(r=i.charCodeAt(u),r<55296||r>56319||u+1===c||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536)}}(!0);!function(t,n,e,r,o,i,u){sn(e,n,r);var c,a,l,f=function(t){if(!yn&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},s=n+" Iterator",d="values"==o,p=!1,v=t.prototype,y=v[vn]||v["@@iterator"]||o&&v[o],h=y||f(o),w=o?d?f("entries"):h:void 0,g="Array"==n?v.entries||y:y;if(g&&(l=pn(g.call(new t)))!==Object.prototype&&dn(l,s,!0),d&&y&&"values"!==y.name&&(p=!0,h=function(){return y.call(this)}),u&&(yn||p||!v[vn])&&ln(v,vn,h),fn[n]=h,fn[s]=hn,o)if(c={values:d?h:f("values"),keys:i?h:f("keys"),entries:w},u)for(a in c)a in v||an(v,a,c[a]);else cn(cn.P+cn.F*(yn||p),n,c)}(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=wn(n,e),this._i+=t.length,{value:t,done:!1})});var gn=b,mn=function(t,n,e,r){try{return r?n(gn(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&gn(o.call(t)),n}},bn=Q,Sn=zt("iterator"),En=Array.prototype,On=function(t){return void 0!==t&&(bn.Array===t||En[Sn]===t)},An=I,_n=U,Ln=function(t,n,e){n in t?An.f(t,n,_n(0,e)):t[n]=e},jn=X,xn=zt("toStringTag"),Mn="Arguments"==jn(function(){return arguments}()),Cn=function(t,n){try{return t[n]}catch(t){}},Tn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=Cn(n=Object(t),xn))?e:Mn?jn(n):"Object"==(r=jn(n))&&"function"==typeof n.callee?"Arguments":r},Pn=Tn,Fn=zt("iterator"),Rn=Q,In=v.getIteratorMethod=function(t){if(void 0!=t)return t[Fn]||t["@@iterator"]||Rn[Pn(t)]},Un=zt("iterator"),kn=!1;try{var Nn=[7][Un]();Nn.return=function(){kn=!0},Array.from(Nn,function(){throw 2})}catch(t){}var Wn=w,Dn=H,qn=tn,Bn=mn,zn=On,Gn=it,Hn=Ln,Yn=In;Dn(Dn.S+Dn.F*!function(t,n){if(!n&&!kn)return!1;var e=!1;try{var r=[7],o=r[Un]();o.next=function(){return{done:e=!0}},r[Un]=function(){return o},t(r)}catch(t){}return e}(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,r,o,i=qn(t),u="function"==typeof this?this:Array,c=arguments.length,a=c>1?arguments[1]:void 0,l=void 0!==a,f=0,s=Yn(i);if(l&&(a=Wn(a,c>2?arguments[2]:void 0,2)),void 0==s||u==Array&&zn(s))for(n=Gn(i.length),e=new u(n);n>f;f++)Hn(e,f,l?a(i[f],f):i[f]);else for(o=s.call(i),e=new u;!(r=o.next()).done;f++)Hn(e,f,l?Bn(o,a,[r.value,f],!0):r.value);return e.length=f,e}});var Jn=v.Array.from,Kn=t(function(t){t.exports={default:Jn,__esModule:!0}}),Qn=function(t){return t&&t.__esModule?t.default:t}(Kn),Vn=t(function(t){!function(n,e){"function"==typeof define&&define.amd?define(e):"object"==typeof t&&t.exports?t.exports=e():n.log=e()}(u,function(){function t(t){return typeof console!==c&&(void 0!==console[t]?n(console,t):void 0!==console.log?n(console,"log"):u)}function n(t,n){var e=t[n];if("function"==typeof e.bind)return e.bind(t);try{return Function.prototype.bind.call(e,t)}catch(n){return function(){return Function.prototype.apply.apply(e,[t,arguments])}}}function e(t,n,e){return function(){typeof console!==c&&(r.call(this,n,e),this[t].apply(this,arguments))}}function r(t,n){for(var e=0;e<a.length;e++){var r=a[e];this[r]=e<t?u:this.methodFactory(r,t,n)}}function o(n,r,o){return t(n)||e.apply(this,arguments)}function i(t,n,e){function i(t){var n=(a[t]||"silent").toUpperCase();try{return void(window.localStorage[s]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+n+";"}catch(t){}}function u(){var t;try{t=window.localStorage[s]}catch(t){}if(typeof t===c)try{var n=window.document.cookie,e=n.indexOf(encodeURIComponent(s)+"=");e&&(t=/^([^;]+)/.exec(n.slice(e))[1])}catch(t){}return void 0===f.levels[t]&&(t=void 0),t}var l,f=this,s="loglevel";t&&(s+=":"+t),f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=e||o,f.getLevel=function(){return l},f.setLevel=function(n,e){if("string"==typeof n&&void 0!==f.levels[n.toUpperCase()]&&(n=f.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=f.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(l=n,!1!==e&&i(n),r.call(f,n,t),typeof console===c&&n<f.levels.SILENT)return"No console available for logging"},f.setDefaultLevel=function(t){u()||f.setLevel(t,!1)},f.enableAll=function(t){f.setLevel(f.levels.TRACE,t)},f.disableAll=function(t){f.setLevel(f.levels.SILENT,t)};var d=u();null==d&&(d=null==n?"WARN":n),f.setLevel(d,!1)}var u=function(){},c="undefined",a=["trace","debug","info","warn","error"],l=new i,f={};l.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var n=f[t];return n||(n=f[t]=new i(t,l.getLevel(),l.methodFactory)),n};var s=typeof window!==c?window.log:void 0;return l.noConflict=function(){return typeof window!==c&&window.log===l&&(window.log=s),l},l})}),Xn=console.log.bind(null,"[WPESMU]"),Zn=(Vn.trace.bind(null,"[WPESMU]"),Vn.debug.bind(null,"[WPESMU]"),Vn.info.bind(null,"[WPESMU]"));Vn.warn.bind(null,"[WPESMU]"),Vn.error.bind(null,"[WPESMU]");Vn.setLevel("trace"),Zn("Debug logging enabled!");!function(t,n){if("undefined"==typeof document)return n;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),e.appendChild(r)}(".wsmu.box {\n\tposition: fixed;\n\tpadding: 5px;\n\toverflow: hidden;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tz-index: 999999;\n\twidth: 420px;\n}\n.wsmu.top {\n\ttop: 0;\n}\n.wsmu.left {\n\tleft: 0;\n}\n.wsmu.bottom {\n\tbottom: 0;\n}\n.wsmu.right {\n\tright: 0;\n}\n.wsmu.canvas {\n\twidth: 100%;\n\theight: 200px;\n}\n",void 0);var $n=function(t){return document.querySelector(t)},te=null,ne=null,ee=function(t){return Xn("Data received!",t)},re=function(t){ee=t};window.wallpaperRegisterAudioListener=re;var oe=new Audio,ie=new AudioContext,ue=ie.createMediaElementSource(oe),ce=ie.createChannelSplitter(),ae=ie.createAnalyser(),le=ie.createAnalyser(),fe=0,se=0,de=0;ae.smoothingTimeConstant=0,le.smoothingTimeConstant=0,ae.fftSize=2048,le.fftSize=2048,ue.connect(ce),ce.connect(ae,0,0),ce.connect(le,1,0),ue.connect(ie.destination);var pe=function(){var t=ne.getImageData(0,0,te.width,te.height);te.width=te.width,ne.putImageData(t,-1,0)},ve=function t(){fe=window.requestAnimationFrame(t);var e=performance.now(),r=e-se;if(se=e,!((de+=r)<=1e3/30)){de=0;var o=new Float32Array(ae.frequencyBinCount),i=new Float32Array(le.frequencyBinCount);ae.getFloatFrequencyData(o),le.getFloatFrequencyData(i);for(var u=Qn(o).slice(0,512),c=Qn(i).slice(0,512),a=[],l=[],f=0;f<512;f+=4)a.push(Math.pow((u[f]+u[f+1]+u[f+2]+u[f+3])/512+1,2)*Math.pow(.9+4*f/o.length,2)*.6),l.push(Math.pow((c[f]+c[f+1]+c[f+2]+c[f+3])/512+1,2)*Math.pow(.9+4*f/i.length,2)*.6);var s=u.concat(c).reverse();pe();for(var d in s){var p=(128+s[d])/128;p<0&&(p=0),ne.fillStyle="rgba(255, 255, 255, "+p+")",ne.fillRect(1023,d,1,1)}var v=a.concat(l).map(n);ee(v)}},ye=function t(){document.removeEventListener("DOMContentLoaded",t,!1),$n("body").insertAdjacentHTML("afterbegin",'<div class="wsmu box left top">\n\t<input class="wsmu input" type="file" accept="audio/*">\n\t<button class="wsmu btn play">Play</button>\n\t<button class="wsmu btn pause">Pause</button>\n\t<button class="wsmu btn stop">Stop</button>\n\t<canvas class="wsmu canvas" height="1024" width="1024"></canvas>\n</div>\n');var n=$n(".wsmu.input"),u=$n(".wsmu.btn.play"),c=$n(".wsmu.btn.pause"),a=$n(".wsmu.btn.stop");te=$n(".wsmu.canvas"),ne=te.getContext("2d"),n.addEventListener("change",e),u.addEventListener("click",r),c.addEventListener("click",o),a.addEventListener("click",i),Zn("v0.2.1.master.8e330b9 Initialized!")};document.addEventListener("DOMContentLoaded",ye,!1)}();
