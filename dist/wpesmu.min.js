!function(){"use strict";function t(t,n){return n={exports:{}},t(n,n.exports),n.exports}function n(t){return t<0||t===1/0?0:t}function e(t){var n=URL.createObjectURL(t.target.files[0]);ue.src&&URL.revokeObjectURL(ue.src),ue.src=n}function r(){pe||Se(),ue.play()}function o(){ue.pause()}function i(){ue.pause(),ue.currentTime=0,window.cancelAnimationFrame(pe),pe=0}function u(t){var n=new AudioContext,e=n.createScriptProcessor(4096),r=n.createMediaStreamSource(t);e.onaudioprocess=me,r.connect(e),e.connect(n.destination),he=!0,Ee()}function c(t){$n("Rejected!",t),Ee()}var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=Math.ceil,l=Math.floor,s=function(t){return isNaN(t=+t)?0:(t>0?l:f)(t)},d=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},p=s,v=d,y=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),h=t(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),w=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},g=w,m=function(t,n,e){if(g(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=b,O=function(t){if(!S(t))throw TypeError(t+" is not an object!");return t},E=function(t){try{return!!t()}catch(t){return!0}},A=!E(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=b,C=y.document,L=_(C)&&_(C.createElement),j=function(t){return L?C.createElement(t):{}},x=!A&&!E(function(){return 7!=Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a}),M=b,F=function(t,n){if(!M(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!M(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!M(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!M(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},P=O,T=x,R=F,U=Object.defineProperty,I=A?Object.defineProperty:function(t,n,e){if(P(t),n=R(n,!0),P(e),T)try{return U(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t},k={f:I},N=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},D=k,W=N,B=A?function(t,n,e){return D.f(t,n,W(1,e))}:function(t,n,e){return t[n]=e,t},q=y,z=h,G=m,H=B,Y=function(t,n,e){var r,o,i,u=t&Y.F,c=t&Y.G,a=t&Y.S,f=t&Y.P,l=t&Y.B,s=t&Y.W,d=c?z:z[n]||(z[n]={}),p=d.prototype,v=c?q:a?q[n]:(q[n]||{}).prototype;c&&(e=n);for(r in e)(o=!u&&v&&void 0!==v[r])&&r in d||(i=o?v[r]:e[r],d[r]=c&&"function"!=typeof v[r]?e[r]:l&&o?G(i,q):s&&v[r]==i?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(i):f&&"function"==typeof i?G(Function.call,i):i,f&&((d.virtual||(d.virtual={}))[r]=i,t&Y.R&&p&&!p[r]&&H(p,r,i)))};Y.F=1,Y.G=2,Y.S=4,Y.P=8,Y.B=16,Y.W=32,Y.U=64,Y.R=128;var J=Y,K=B,Q={}.hasOwnProperty,V=function(t,n){return Q.call(t,n)},X={},Z={}.toString,$=function(t){return Z.call(t).slice(8,-1)},tt=$,nt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==tt(t)?t.split(""):Object(t)},et=nt,rt=d,ot=function(t){return et(rt(t))},it=s,ut=Math.min,ct=function(t){return t>0?ut(it(t),9007199254740991):0},at=s,ft=Math.max,lt=Math.min,st=function(t,n){return t=at(t),t<0?ft(t+n,0):lt(t,n)},dt=ot,pt=ct,vt=st,yt=y,ht=yt["__core-js_shared__"]||(yt["__core-js_shared__"]={}),wt=function(t){return ht[t]||(ht[t]={})},gt=0,mt=Math.random(),bt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++gt+mt).toString(36))},St=wt("keys"),Ot=bt,Et=function(t){return St[t]||(St[t]=Ot(t))},At=V,_t=ot,Ct=function(t){return function(n,e,r){var o,i=dt(n),u=pt(i.length),c=vt(r,u);if(t&&e!=e){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===e)return t||c||0;return!t&&-1}}(!1),Lt=Et("IE_PROTO"),jt=function(t,n){var e,r=_t(t),o=0,i=[];for(e in r)e!=Lt&&At(r,e)&&i.push(e);for(;n.length>o;)At(r,e=n[o++])&&(~Ct(i,e)||i.push(e));return i},xt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Mt=jt,Ft=xt,Pt=Object.keys||function(t){return Mt(t,Ft)},Tt=k,Rt=O,Ut=Pt,It=A?Object.defineProperties:function(t,n){Rt(t);for(var e,r=Ut(n),o=r.length,i=0;o>i;)Tt.f(t,e=r[i++],n[e]);return t},kt=y.document&&document.documentElement,Nt=O,Dt=It,Wt=xt,Bt=Et("IE_PROTO"),qt=function(){},zt=function(){var t,n=j("iframe"),e=Wt.length;for(n.style.display="none",kt.appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),zt=t.F;e--;)delete zt.prototype[Wt[e]];return zt()},Gt=Object.create||function(t,n){var e;return null!==t?(qt.prototype=Nt(t),e=new qt,qt.prototype=null,e[Bt]=t):e=zt(),void 0===n?e:Dt(e,n)},Ht=t(function(t){var n=wt("wks"),e=bt,r=y.Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:e)("Symbol."+t))}).store=n}),Yt=k.f,Jt=V,Kt=Ht("toStringTag"),Qt=function(t,n,e){t&&!Jt(t=e?t:t.prototype,Kt)&&Yt(t,Kt,{configurable:!0,value:n})},Vt=Gt,Xt=N,Zt=Qt,$t={};B($t,Ht("iterator"),function(){return this});var tn=function(t,n,e){t.prototype=Vt($t,{next:Xt(1,e)}),Zt(t,n+" Iterator")},nn=d,en=function(t){return Object(nn(t))},rn=V,on=en,un=Et("IE_PROTO"),cn=Object.prototype,an=Object.getPrototypeOf||function(t){return t=on(t),rn(t,un)?t[un]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?cn:null},fn=J,ln=K,sn=B,dn=X,pn=tn,vn=Qt,yn=an,hn=Ht("iterator"),wn=!([].keys&&"next"in[].keys()),gn=function(){return this},mn=function(t){return function(n,e){var r,o,i=String(v(n)),u=p(e),c=i.length;return u<0||u>=c?t?"":void 0:(r=i.charCodeAt(u),r<55296||r>56319||u+1===c||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536)}}(!0);!function(t,n,e,r,o,i,u){pn(e,n,r);var c,a,f,l=function(t){if(!wn&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},s=n+" Iterator",d="values"==o,p=!1,v=t.prototype,y=v[hn]||v["@@iterator"]||o&&v[o],h=y||l(o),w=o?d?l("entries"):h:void 0,g="Array"==n?v.entries||y:y;if(g&&(f=yn(g.call(new t)))!==Object.prototype&&vn(f,s,!0),d&&y&&"values"!==y.name&&(p=!0,h=function(){return y.call(this)}),u&&(wn||p||!v[hn])&&sn(v,hn,h),dn[n]=h,dn[s]=gn,o)if(c={values:d?h:l("values"),keys:i?h:l("keys"),entries:w},u)for(a in c)a in v||ln(v,a,c[a]);else fn(fn.P+fn.F*(wn||p),n,c)}(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=mn(n,e),this._i+=t.length,{value:t,done:!1})});var bn=O,Sn=function(t,n,e,r){try{return r?n(bn(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&bn(o.call(t)),n}},On=X,En=Ht("iterator"),An=Array.prototype,_n=function(t){return void 0!==t&&(On.Array===t||An[En]===t)},Cn=k,Ln=N,jn=function(t,n,e){n in t?Cn.f(t,n,Ln(0,e)):t[n]=e},xn=$,Mn=Ht("toStringTag"),Fn="Arguments"==xn(function(){return arguments}()),Pn=function(t,n){try{return t[n]}catch(t){}},Tn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=Pn(n=Object(t),Mn))?e:Fn?xn(n):"Object"==(r=xn(n))&&"function"==typeof n.callee?"Arguments":r},Rn=Tn,Un=Ht("iterator"),In=X,kn=h.getIteratorMethod=function(t){if(void 0!=t)return t[Un]||t["@@iterator"]||In[Rn(t)]},Nn=Ht("iterator"),Dn=!1;try{var Wn=[7][Nn]();Wn.return=function(){Dn=!0},Array.from(Wn,function(){throw 2})}catch(t){}var Bn=m,qn=J,zn=en,Gn=Sn,Hn=_n,Yn=ct,Jn=jn,Kn=kn;qn(qn.S+qn.F*!function(t,n){if(!n&&!Dn)return!1;var e=!1;try{var r=[7],o=r[Nn]();o.next=function(){return{done:e=!0}},r[Nn]=function(){return o},t(r)}catch(t){}return e}(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,r,o,i=zn(t),u="function"==typeof this?this:Array,c=arguments.length,a=c>1?arguments[1]:void 0,f=void 0!==a,l=0,s=Kn(i);if(f&&(a=Bn(a,c>2?arguments[2]:void 0,2)),void 0==s||u==Array&&Hn(s))for(n=Yn(i.length),e=new u(n);n>l;l++)Jn(e,l,f?a(i[l],l):i[l]);else for(o=s.call(i),e=new u;!(r=o.next()).done;l++)Jn(e,l,f?Gn(o,a,[r.value,l],!0):r.value);return e.length=l,e}});var Qn=h.Array.from,Vn=t(function(t){t.exports={default:Qn,__esModule:!0}}),Xn=function(t){return t&&t.__esModule?t.default:t}(Vn),Zn=t(function(t){!function(n,e){"function"==typeof define&&define.amd?define(e):"object"==typeof t&&t.exports?t.exports=e():n.log=e()}(a,function(){function t(t){return typeof console!==c&&(void 0!==console[t]?n(console,t):void 0!==console.log?n(console,"log"):u)}function n(t,n){var e=t[n];if("function"==typeof e.bind)return e.bind(t);try{return Function.prototype.bind.call(e,t)}catch(n){return function(){return Function.prototype.apply.apply(e,[t,arguments])}}}function e(t,n,e){return function(){typeof console!==c&&(r.call(this,n,e),this[t].apply(this,arguments))}}function r(t,n){for(var e=0;e<a.length;e++){var r=a[e];this[r]=e<t?u:this.methodFactory(r,t,n)}}function o(n,r,o){return t(n)||e.apply(this,arguments)}function i(t,n,e){function i(t){var n=(a[t]||"silent").toUpperCase();try{return void(window.localStorage[s]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+n+";"}catch(t){}}function u(){var t;try{t=window.localStorage[s]}catch(t){}if(typeof t===c)try{var n=window.document.cookie,e=n.indexOf(encodeURIComponent(s)+"=");e&&(t=/^([^;]+)/.exec(n.slice(e))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}var f,l=this,s="loglevel";t&&(s+=":"+t),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=e||o,l.getLevel=function(){return f},l.setLevel=function(n,e){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(f=n,!1!==e&&i(n),r.call(l,n,t),typeof console===c&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){u()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var d=u();null==d&&(d=null==n?"WARN":n),l.setLevel(d,!1)}var u=function(){},c="undefined",a=["trace","debug","info","warn","error"],f=new i,l={};f.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var n=l[t];return n||(n=l[t]=new i(t,f.getLevel(),f.methodFactory)),n};var s=typeof window!==c?window.log:void 0;return f.noConflict=function(){return typeof window!==c&&window.log===f&&(window.log=s),f},f})}),$n=console.log.bind(null,"[WPESMU]"),te=(Zn.trace.bind(null,"[WPESMU]"),Zn.debug.bind(null,"[WPESMU]"),Zn.info.bind(null,"[WPESMU]"));Zn.warn.bind(null,"[WPESMU]"),Zn.error.bind(null,"[WPESMU]");Zn.setLevel("trace"),te("Debug logging enabled!");!function(t,n){if("undefined"==typeof document)return n;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),e.appendChild(r)}(".wsmu.box {\n\tposition: fixed;\n\tpadding: 5px;\n\toverflow: hidden;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tz-index: 999999;\n\twidth: 420px;\n}\n.wsmu.top {\n\ttop: 0;\n}\n.wsmu.left {\n\tleft: 0;\n}\n.wsmu.bottom {\n\tbottom: 0;\n}\n.wsmu.right {\n\tright: 0;\n}\n.wsmu.canvas {\n\twidth: 100%;\n\theight: 200px;\n}\n",void 0);var ne=function(t){return document.querySelector(t)},ee=null,re=null,oe=function(t){return $n("Data received!",t)},ie=function(t){oe=t};window.wallpaperRegisterAudioListener=ie;var ue=new Audio,ce=new AudioContext,ae=ce.createMediaElementSource(ue),fe=ce.createScriptProcessor(4096),le=ce.createChannelSplitter(),se=ce.createAnalyser(),de=ce.createAnalyser(),pe=0,ve=0,ye=0,he=!1,we=[new Float32Array(4096),new Float32Array(4096)];se.smoothingTimeConstant=0,de.smoothingTimeConstant=0,se.fftSize=2048,de.fftSize=2048;var ge=function(t){for(var n=t.inputBuffer,e=t.outputBuffer,r=0;r<e.numberOfChannels;r++)for(var o=n.getChannelData(r),i=e.getChannelData(r),u=0;u<n.length;u++)i[u]=o[u],we[r][u]&&(i[u]+=we[r][u])},me=function(t){for(var n=t.inputBuffer,e=0;e<n.numberOfChannels;e++)n.copyFromChannel(we[e],e)};fe.onaudioprocess=ge;var be=function(){var t=re.getImageData(0,0,ee.width,ee.height);ee.width=ee.width,re.putImageData(t,-1,0)},Se=function t(){pe=window.requestAnimationFrame(t);var e=performance.now(),r=e-ve;if(ve=e,!((ye+=r)<=1e3/30)){ye=0;var o=new Float32Array(se.frequencyBinCount),i=new Float32Array(de.frequencyBinCount);se.getFloatFrequencyData(o),de.getFloatFrequencyData(i);for(var u=Xn(o).slice(0,512),c=Xn(i).slice(0,512),a=[],f=[],l=0;l<512;l+=4)a.push(Math.pow((u[l]+u[l+1]+u[l+2]+u[l+3])/512+1,2)*Math.pow(.9+4*l/o.length,2)*.6),f.push(Math.pow((c[l]+c[l+1]+c[l+2]+c[l+3])/512+1,2)*Math.pow(.9+4*l/i.length,2)*.6);var s=u.concat(c).reverse();be();for(var d in s){var p=(128+s[d])/128;p<0&&(p=0),re.fillStyle="rgba(255, 255, 255, "+p+")",re.fillRect(1023,d,1,1)}var v=a.reverse().concat(f.reverse()).map(n);oe(v)}},Oe=function t(){document.removeEventListener("DOMContentLoaded",t,!1),ne("body").insertAdjacentHTML("afterbegin",'<div class="wsmu box left top">\n\t<input class="wsmu input" type="file" accept="audio/*">\n\t<button class="wsmu btn play">Play</button>\n\t<button class="wsmu btn pause">Pause</button>\n\t<button class="wsmu btn stop">Stop</button>\n\t<canvas class="wsmu canvas" height="1024" width="1024"></canvas>\n</div>\n');var n=ne(".wsmu.input"),u=ne(".wsmu.btn.play"),c=ne(".wsmu.btn.pause"),a=ne(".wsmu.btn.stop");ee=ne(".wsmu.canvas"),re=ee.getContext("2d"),he&&Se(),n.addEventListener("change",e),u.addEventListener("click",r),c.addEventListener("click",o),a.addEventListener("click",i),te("v0.3.0.master.0b1409d Initialized!")},Ee=function(){ae.connect(fe),fe.connect(le),le.connect(se,0,0),le.connect(de,1,0),ae.connect(ce.destination),Oe()},Ae=function(){navigator.getUserMedia({audio:!0},u,c)};document.addEventListener("DOMContentLoaded",Ae,!1)}();
